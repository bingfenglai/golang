# Golang入门学习之方法（method）

## 写在前面

在上一篇文章[《Golang入门学习之结构体（struct）》](https://code81192.github.io/2021/09/07/golang/07_go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8_%E7%BB%93%E6%9E%84%E4%BD%93/)当中，我们学习了Golang当中结构体（struct）的知识点，接下来我们讲学习Golang当中的方法（method）。

## 方法的定义

在Golang当中，方法是作用在接收者（receiver）上的一个函数，接收者是某种类型的变量。因此，方法是一种特殊的函数。这里的接收者可以（几乎，接收者类型不能是一个接口类型或指针类型）任何类型，不仅仅是结构体类型，也就意味着，几乎任何类型都可以方法，甚至是函数类型，或者是int、bool等的别名类型。

我们可以这样理解：一个类型（比如说是结构体）加上它的方法就等价于面向对象语言当中的一个类。

### 方法的定义格式

```go
func (recv receiver_type) methodName(parameter_list) (return_value_list) { ... }
```

`recv` 就像是面向对象语言中的 `this` 或 `self`，但是 Golang 中并没有这两个关键字。随个人喜好，你可以使用 `this` 或 `self` 作为 receiver 的名字。

### 注意点

在 Golang 中，类型的代码和绑定在它上面的方法的代码可以不放置在一起，它们可以存在在不同的源文件，唯一的要求是：它们必须是同一个包的。请看下面这个例子：

我们在`src/go_code/method/model/immortal.go` 当中定义了一个修仙者类型

```go
package model

// 修仙者
type immortal struct {
	name   string
	age    int
	gender string
}
```

然后，我们在`src/go_code/method/model/immortal_method.go` 当中定义`immortal` 类型的方法

```go
package model

// 工厂函数
func NewImmortal(age int, name, gender string) *immortal {

	return &immortal{
		name:   name,
		age:    age,
		gender: gender,
	}
}

// Getter
func (recv *immortal) GetName() string {
	return recv.name
}
...
```

再然后，我们再main包当中使用它

```go
package main

import (
	"fmt"
	"go_code/method/model"
)

func main() {
	i := model.NewImmortal(18,"韩立","男")
	name :=i.GetName()
	fmt.Println(name)
}
```

输出：

```
韩立
```

## 函数与方法的区别

函数和方法都是一段可复用的代码段。他们的区别在于函数是面向过程的，方法是面向对象。从调用上来看，函数通过函数名进行调用，而方法则通过与实例关联的变量进行调用。

```go
// 函数调用
println("Hello World")
// 方法调用
immortal := model.NewImmortal(18,"韩立","男")
immortal.GetName()
```

再看Golang当中，方法由接收者类型、方法名、形参列表、返回值列表和方法体五部分构成，并且接收者必须有一个显式的名字，这个名字必须在方法中被使用。而且，接收者类型（receiver_type）必须在和方法同样的包中被声明。

## Golang中方法的其他特性

在Golang当中，接收者类型关联的方法不写在类型结构里面（面向对象语言Java的方法是在类当中进行定义的）。因此，在Golang当中方法与接收者类型的耦合更加地宽松，也就是说，数据（字段）与其对应的行为是相互独立。

## 接收者类型可以是一个值而不是类型的指针吗？

